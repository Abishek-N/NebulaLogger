<template>
    <div class="wrapper slds-var-p-around_small">
        <lightning-tabset>
            <lightning-tab label="User Settings">
                <template if:true={records}>
                    <lightning-card title={settingsTitle} icon-name="standard:settings">
                        <div slot="actions">
                            <template if:true={canEditLoggerSettings}>
                                <lightning-button label="New" variant="brand"></lightning-button>
                            </template>
                        </div>
                        <lightning-datatable
                            columns={columns}
                            data={records}
                            default-sort-direction={defaultSortDirection}
                            hide-checkbox-column
                            key-field="Id"
                            onsave={handleSave}
                            onsort={handleSort}
                            show-row-number-column
                            sorted-by={sortedBy}
                            sorted-direction={sortedDirection}
                        >
                        </lightning-datatable>
                    </lightning-card>
                </template>
            </lightning-tab>
            <lightning-tab label="System Parameters">
                <template if:true={parametersLoaded}>
                    <c-custom-metadata-table
                        icon-name="standard:bundle_config"
                        enable-editing={canEditLoggerParameters}
                        fields-to-display="DeveloperName, MasterLabel, Value__c, Description__c"
                        fields-to-edit="Value__c"
                        object-api-name="LoggerParameter__mdt"
                        records={parameterRecords}
                        title={parametersTitle}
                    >
                    </c-custom-metadata-table>
                </template>
            </lightning-tab>
            <lightning-tab label="Data Mask Rules">
                <template if:true={dataMaskRulesLoaded}>
                    <c-custom-metadata-table
                        icon-name="standard:topic"
                        enable-editing={canEditLoggerParameters}
                        fields-to-display="DeveloperName, MasterLabel, IsEnabled__c, ApplyToMessage__c, ApplyToRecordJson__c, SensitiveDataRegEx__c, ReplacementRegEx__c"
                        fields-to-edit="IsEnabled__c, ApplyToMessage__c, ApplyToRecordJson__c, SensitiveDataRegEx__c, ReplacementRegEx__c"
                        object-api-name="LogEntryDataMaskRule__mdt"
                        records={dataMaskRules}
                        title={dataMaskRulesTitle}
                    >
                    </c-custom-metadata-table>
                </template>
            </lightning-tab>
            <lightning-tab label="Plugins">
                <template if:true={pluginsLoaded}>
                    <c-custom-metadata-table
                        icon-name="standard:apex_plugin"
                        enable-editing={canEditLoggerPlugins}
                        fields-to-display="DeveloperName, MasterLabel, IsEnabled__c, Description__c"
                        fields-to-edit="IsEnabled__c, Description__c"
                        object-api-name="LoggerPlugin__mdt"
                        records={pluginRecords}
                        title={pluginsTitle}
                    >
                    </c-custom-metadata-table>
                </template>
            </lightning-tab>
        </lightning-tabset>
    </div>
</template>
